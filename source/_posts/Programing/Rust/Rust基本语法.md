---
title: ruståŸºæœ¬è¯­æ³•
date: 2025-07-28 21:49:13
tags: Rust
categories: Programing
---
# rust åŸºæœ¬è¯­æ³•

## 1. å˜é‡ä¸å¯å˜æ€§

rust ä¸­çš„å˜é‡é»˜è®¤æ˜¯ **ä¸å¯å˜** çš„ã€‚å¯ä»¥ä½¿ç”¨ `mut` å…³é”®å­—ä½¿å˜é‡å˜ä¸º **å¯å˜** çš„ã€‚

### 1.1 å¯å˜å˜é‡

é€šè¿‡ `mut` å…³é”®å­—ï¼Œå¯ä»¥å£°æ˜ä¸€ä¸ªå¯å˜å˜é‡ï¼Œå…¶å€¼åœ¨åç»­å¯ä»¥è¢«ä¿®æ”¹ã€‚

```rust
// å¯å˜å˜é‡
let mut x = 5;
println!("The value of x is: {}", x);
x = 10;
println!("The value of x is: {}", x);
```

### 1.2 å¸¸é‡

å¸¸é‡åœ¨ç»‘å®šå€¼åä»»ä½•æ—¶å€™éƒ½ä¸èƒ½æ›´æ”¹ã€‚

- **å£°æ˜**: ä½¿ç”¨ `const` å…³é”®å­—ï¼Œä¸”å¿…é¡»æ˜¾å¼æ ‡æ³¨å€¼çš„ç±»å‹ã€‚
- **å‘½å**: rust å¸¸é‡çš„å‘½åçº¦å®šæ˜¯ä½¿ç”¨å…¨å¤§å†™å­—æ¯ï¼Œå¹¶ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚
- **èµ‹å€¼**: åªèƒ½è¢«è®¾ç½®ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œä¸èƒ½æ˜¯å‡½æ•°è°ƒç”¨çš„ç»“æœæˆ–ä»»ä½•å…¶ä»–åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šçš„å€¼ã€‚

```
// å¸¸é‡ ä¸å¯ç”¨mutï¼Œå¿…é¡»æ ‡æ³¨ç±»å‹ï¼Œä»…å¯ä»¥ç”¨å¸¸é‡è¡¨è¾¾å¼èµ‹å€¼
const SPECAL_NUMBER: i32 = 3;
println!("The value of SPECAL_NUMBER is: {}", SPECAL_NUMBER);
```

### 1.3 å˜é‡é®è”½ (Shadowing)

rust å…è®¸å£°æ˜ä¸€ä¸ªä¸ä¹‹å‰å˜é‡åŒåçš„æ–°å˜é‡ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºé®è”½ (Shadowing)ã€‚æ–°å˜é‡ä¼šâ€œé®è”½â€æ‰æ—§çš„å˜é‡ã€‚

- å®ƒé€šè¿‡å†æ¬¡ä½¿ç”¨ `let` å…³é”®å­—æ¥åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„å˜é‡ã€‚
- è¿™å…è®¸æˆ‘ä»¬æ”¹å˜å€¼çš„ç±»å‹ï¼ŒåŒæ—¶ä¿æŒåç§°ä¸å˜ã€‚
- åœ¨ç¦»å¼€ä½œç”¨åŸŸåï¼Œè¢«é®è”½çš„å˜é‡ä¼šæ¢å¤ã€‚

```rust
// å˜é‡é®è”½
let my_number = 5;
// è¿™é‡Œçš„my_numberæ˜¯ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œé®è”½äº†åŸæ¥çš„ 5
let my_number = my_number + 1; 

{
    // åœ¨è¿™ä¸ªå†…éƒ¨ä½œç”¨åŸŸï¼Œmy_numberåˆè¢«ä¸€æ¬¡é®è”½
    let my_number = my_number * 2;
    println!("The value of my_number in the inner scope is: {}", my_number); // è¾“å‡º 12
}

println!("The value of my_number is: {}", my_number); // è¾“å‡º 6
```

## 2. æ•°æ®ç±»å‹

rust æ˜¯ä¸€ç§é™æ€ç±»å‹è¯­è¨€ï¼Œå®ƒåœ¨ç¼–è¯‘æ—¶å°±å¿…é¡»çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚æ•°æ®ç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š**æ ‡é‡ç±»å‹**å’Œ**å¤åˆç±»å‹**ã€‚

### 2.1 æ ‡é‡ç±»å‹ (Scalar Types)

æ ‡é‡ç±»å‹è¡¨ç¤ºä¸€ä¸ªå•ä¸€çš„å€¼ã€‚rust æœ‰å››ç§ä¸»è¦çš„æ ‡é‡ç±»å‹ï¼š

| ç±»å‹       | è¯´æ˜                                                         | ç¤ºä¾‹                                  |
| ---------- | ------------------------------------------------------------ | ------------------------------------- |
| **æ•´æ•°**   | æœ‰ç¬¦å· (`i8` åˆ° `i128`, `isize`) å’Œæ— ç¬¦å· (`u8` åˆ° `u128`, `usize`) | `let int1 = 98_222;`                  |
| **æµ®ç‚¹æ•°** | `f32` (å•ç²¾åº¦) å’Œ `f64` (åŒç²¾åº¦)                             | `const PI: f64 = 3.14159;`            |
| **å¸ƒå°”å€¼** | `bool`ï¼Œå€¼ä¸º `true` æˆ– `false`                               | `let is_rust_fun = true;`             |
| **å­—ç¬¦**   | `char`ï¼Œè¡¨ç¤ºä¸€ä¸ª Unicode æ ‡é‡å€¼ï¼Œç”¨å•å¼•å·æ‹¬èµ·æ¥              | `let char1 = 'z';` `let char2 = 'ğŸ˜»';` |

**æ•´æ•°çš„å­—é¢é‡è¡¨ç¤º:**

```rust
let int1 = 98_222;       // åè¿›åˆ¶ï¼Œä¸‹åˆ’çº¿å¯ç”¨äºæé«˜å¯è¯»æ€§
let int2 = 0xff;         // åå…­è¿›åˆ¶
let int3 = 0o77;         // å…«è¿›åˆ¶
let int4 = 0b1111_0000;   // äºŒè¿›åˆ¶
let int5 = b'A';         // å­—èŠ‚ (u8)
```

### 2.2 å¤åˆç±»å‹ (Compound Types)

å¤åˆç±»å‹å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ã€‚rust æœ‰ä¸¤ç§åŸç”Ÿçš„å¤åˆç±»å‹ï¼š

#### å…ƒç»„ (Tuple)

- å°†å¤šä¸ªä¸åŒç±»å‹çš„å€¼ç»„åˆè¿›ä¸€ä¸ªå¤åˆç±»å‹ä¸­ã€‚
- é•¿åº¦å›ºå®šï¼šä¸€æ—¦å£°æ˜ï¼Œå…¶å¤§å°ä¸èƒ½ä¼¸ç¼©ã€‚
- å¯ä»¥é€šè¿‡æ¨¡å¼åŒ¹é…è¿›è¡Œ **è§£æ„ (Destructuring)**ï¼Œæˆ–ä½¿ç”¨ç‚¹å· `.` åŠ ç´¢å¼•æ¥è®¿é—®å…ƒç´ ã€‚

```rust
// å…ƒç»„ ä¸åŒæ•°æ®ç±»å‹çš„ç»„åˆ
let my_tuple: (i32, f64, u8) = (500, 6.4, 1);

// è§£æ„å…ƒç»„
let (x, y, z) = my_tuple;
println!("The value of y is: {}", y);

// é€šè¿‡ç´¢å¼•è®¿é—®
let five_hundred = my_tuple.0;
println!("The first value is: {}", five_hundred);
```

#### æ•°ç»„ (Array)

- å°†å¤šä¸ª **ç›¸åŒç±»å‹** çš„å€¼ç»„åˆåœ¨ä¸€èµ·ã€‚
- é•¿åº¦å›ºå®šã€‚
- æ•°æ®å­˜å‚¨åœ¨æ ˆä¸Šã€‚

```rust
let a = [10, 20, 30, 40, 50];
let first = a[0]; // è®¿é—®æ•°ç»„å…ƒç´ 
```

## 3. å‡½æ•°

ä½¿ç”¨ `fn` å…³é”®å­—å®šä¹‰å‡½æ•°ã€‚rust ä»£ç ä½¿ç”¨è›‡å½¢å‘½åæ³• (snake case) ä½œä¸ºå‡½æ•°å’Œå˜é‡åç§°çš„è§„èŒƒã€‚

### 3.1 å‡½æ•°å‚æ•°

å¿…é¡»ä¸ºæ¯ä¸ªå‚æ•°å£°æ˜å…¶ç±»å‹ã€‚

```rust
fn another_function(x: i32, y: String) {
    println!("The value of x is: {}", x);
    println!("The value of y is: {}", y);
}
```

### 3.2 è¯­å¥å’Œè¡¨è¾¾å¼

- **è¯­å¥ (Statements)**: æ‰§è¡ŒæŸäº›æ“ä½œä½†ä¸è¿”å›å€¼çš„æŒ‡ä»¤ã€‚ä¾‹å¦‚ `let x = 6;`ã€‚
- **è¡¨è¾¾å¼ (Expressions)**: ä¼šè®¡ç®—å¹¶äº§ç”Ÿä¸€ä¸ªå€¼ã€‚ä¾‹å¦‚ `5 + 6`ã€‚
- å‡½æ•°ä½“ç”±ä¸€ç³»åˆ—è¯­å¥å’Œä¸€ä¸ªå¯é€‰çš„ç»“å°¾è¡¨è¾¾å¼æ„æˆã€‚
- åœ¨ rust ä¸­ï¼Œä»£ç å— `{}` æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒä¼šè¿”å›å—ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚

```rust
let y = {
    let x = 5;
    x + 1 // è¿™ä¸ªå—è¡¨è¾¾å¼çš„è¿”å›å€¼æ˜¯ 6ï¼Œæ³¨æ„æœ«å°¾æ²¡æœ‰åˆ†å·
};
println!("The value of y is: {}", y); // y çš„å€¼ä¸º 6
```

### 3.3 å‡½æ•°è¿”å›å€¼

- åœ¨ç®­å¤´ `->` ä¹‹åå£°æ˜è¿”å›å€¼çš„ç±»å‹ã€‚
- å‡½æ•°çš„è¿”å›å€¼æ˜¯å…¶å‡½æ•°ä½“ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚
- å¯ä»¥ä½¿ç”¨ `return` å…³é”®å­—æå‰ä»å‡½æ•°ä¸­è¿”å›ã€‚
- æ²¡æœ‰æ˜¾å¼è¿”å›å€¼çš„å‡½æ•°ï¼Œå…¶è¿”å›ç±»å‹æ˜¯ `()`ï¼Œç§°ä¸ºå•å…ƒç±»å‹ (unit type)ã€‚

```rust
// å«è¿”å›å€¼çš„å‡½æ•°
fn five() -> i32 {
    5 // è¿™æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå…¶å€¼å°†ä½œä¸ºå‡½æ•°è¿”å›å€¼
}

fn plus_one(x: i32) -> i32 {
    return x + 1; // ä¹Ÿå¯ä»¥ä½¿ç”¨ return æ˜¾å¼è¿”å›
}
```

## 4. æ§åˆ¶æµ

### 4.1 `if` è¡¨è¾¾å¼

- `if` è¡¨è¾¾å¼çš„æ¡ä»¶å¿…é¡»æ˜¯ `bool` ç±»å‹ã€‚
- å› ä¸º `if` æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶ç”¨åœ¨ `let` è¯­å¥çš„å³ä¾§æ¥èµ‹å€¼ã€‚

```rust
fn if_function(x: i32) {
    if x < 5 {
        println!("x is less than 5");
    } else if x == 5 {
        println!("x is equal to 5");
    } else {
        println!("x is greater than 5");
    }

    // ifè¡¨è¾¾å¼å¯ä»¥è¿”å›å€¼
    let y = if x < 10 { x + 1 } else { x - 1 };
    println!("The value of y is: {}", y);
}
```

### 4.2 å¾ªç¯

rust æä¾›äº†ä¸‰ç§å¾ªç¯ï¼š`loop`ã€`while` å’Œ `for`ã€‚

#### `loop`

- `loop` å…³é”®å­—å‘Šè¯‰ rust æ— é™æ¬¡åœ°æ‰§è¡Œä¸€å—ä»£ç ï¼Œç›´åˆ°ä½ æ˜¾å¼åœ°å‘Šè¯‰å®ƒåœæ­¢ã€‚
- å¯ä»¥ä½¿ç”¨ `break` å…³é”®å­—é€€å‡ºå¾ªç¯ï¼Œ`break` åé¢å¯ä»¥è·Ÿä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä½œä¸º `loop` å¾ªç¯çš„è¿”å›å€¼ã€‚
- å¯ä»¥ä½¿ç”¨ `continue` è·³è¿‡å½“å‰è¿­ä»£ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚

```rust
fn loop_function() -> i32 {
    let mut counter = 0;
    loop {
        counter += 1;
        if counter == 10 {
            break counter * 2; // é€€å‡ºå¾ªç¯å¹¶è¿”å› 20
        }
    }
}
```

#### å¾ªç¯æ ‡ç­¾ (Loop Labels)

å¯¹äºåµŒå¥—å¾ªç¯ï¼Œå¯ä»¥ä½¿ç”¨å¾ªç¯æ ‡ç­¾æ¥æŒ‡å®š `break` æˆ– `continue` è¦ä½œç”¨äºå“ªä¸ªå¾ªç¯ã€‚

```rust
fn labeled_loop() {
    let mut count = 0;
    'counting_up: loop {
        println!("count = {count}");
        let mut remaining = 10;

        loop {
            println!("remaining = {}", remaining);
            if remaining == 9 {
                break; // é€€å‡ºå†…å±‚å¾ªç¯
            }
            if count == 2 {
                break 'counting_up; // é€€å‡ºåä¸º 'counting_up çš„å¤–å±‚å¾ªç¯
            }
            remaining -= 1;
        }
        count += 1;
    }
    println!("End count = {count}");
}
```

#### `while` å¾ªç¯

å½“æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œå¾ªç¯å°±ä¼šç»§ç»­ã€‚

```rust
fn while_function() {
    let mut number = 3;

    while number != 0 {
        println!("{}!", number);
        number -= 1;
    }
    println!("LIFTOFF!!!");
}
```

#### `for` å¾ªç¯

ç”¨äºéå†é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¦‚æ•°ç»„ã€‚`for` å¾ªç¯æ˜¯æ›´å®‰å…¨ã€æ›´ç®€æ´çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒé¿å…äº† `while` å¾ªç¯ä¸­å¯èƒ½å‡ºç°çš„ç´¢å¼•è¶Šç•Œç­‰é”™è¯¯ã€‚

```rust
fn for_function() {
    let a = [10, 20, 30, 40, 50];

    // ä½¿ç”¨ .iter() æ–¹æ³•éå†é›†åˆ
    for element in a.iter() {
        println!("The value is: {}", element);
    }

    // éå†ä¸€ä¸ªèŒƒå›´ (Range)
    // .rev() æ–¹æ³•ç”¨äºåè½¬èŒƒå›´
    for number in (1..4).rev() {
        println!("{}!", number);
    }
    println!("LIFTOFF!!!");
}
```